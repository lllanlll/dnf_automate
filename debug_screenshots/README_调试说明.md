# DNF机器人调试截图分析指南

## 📸 调试截图说明

调试截图已保存在 `debug_screenshots/` 文件夹中，每张图片都标注了机器人的识别结果。

## 🎯 标注说明

### 角色检测标注：
- **红色大圆圈** = 机器人识别为"角色"的位置
- **绿色矩形框** = 检测到的绿色文字区域（用于推算角色位置）
- **黄色小框** = 其他候选的绿色文字区域
- **"DETECTED PLAYER"** = 最终确定的角色位置标签

### 信息显示：
- **Time** = 截图时间
- **Player Pos** = 识别到的角色坐标
- **Total Candidates** = 检测到的绿色文字候选数量
- **BEST: A=xxx S=xxx** = 最佳候选的面积和得分

## 🔍 问题诊断

### 如果角色位置不准确，可能的原因：

1. **识别了错误的绿色文字**
   - 可能是游戏UI中的绿色文字（非角色相关）
   - 可能是NPC名字或其他绿色标签
   - 解决方案：调整绿色检测范围或添加更多过滤条件

2. **角色位置推算错误**
   - 当前算法：文字中心下方40像素
   - 可能需要根据实际情况调整偏移量
   - 解决方案：修改角色位置计算公式

3. **多个候选时选择错误**
   - 当前按得分选择（面积权重 - 距离中心惩罚）
   - 可能需要更智能的选择逻辑
   - 解决方案：改进评分算法

## 🛠️ 下一步调试建议

### 请检查生成的截图并回答：

1. **红色圆圈是否在你的角色上？**
   - 如果是 ✅ = 识别正确
   - 如果不是 ❌ = 需要调整算法

2. **绿色框框住的是什么文字？**
   - 角色名字 ✅ = 正确目标
   - NPC名字 ❌ = 错误目标  
   - UI文字 ❌ = 错误目标
   - 其他文字 ❌ = 需要过滤

3. **如果有多个黄色框，哪个更接近真实角色？**
   - 帮助我们改进选择逻辑

## 📋 反馈模板

请按以下格式提供反馈：

```
截图分析结果：
1. 红色圆圈位置：[正确/不正确，如果不正确请说明应该在哪里]
2. 绿色框内容：[角色名/NPC名/UI文字/其他，请具体说明]
3. 应该选择的候选：[如果有黄色框更准确，请说明是第几个]
4. 建议的改进：[你的想法]
```

## 🔧 常见问题修复

### 问题1：识别了NPC而不是角色
**解决方案：** 添加位置过滤，只检测屏幕中心区域

### 问题2：识别了UI文字
**解决方案：** 添加文字内容过滤或位置限制

### 问题3：角色移动但位置不变
**解决方案：** 检查是否识别了固定的UI元素

### 问题4：完全检测不到角色
**解决方案：** 放宽绿色检测范围或添加其他检测方法

---

**下一步：** 请查看截图并提供反馈，我将根据你的反馈优化识别算法！
